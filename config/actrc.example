# ~/.actrc - nektos/act configuration for dsr
#
# INSTALLATION:
#   cp config/actrc.example ~/.actrc
#
# IMPORTANT: After copying, update the --user line with YOUR UID:GID:
#   id -u  # Your UID (replace 1000 below)
#   id -g  # Your GID (replace 1000 below)
#
# DOCUMENTATION: See docs/ACT_SETUP.md for complete setup guide
#
# VERIFY: Run 'dsr doctor' to check configuration

# Runner image mappings (pin for reproducibility)
# Using catthehacker images which include common build tools
-P ubuntu-latest=catthehacker/ubuntu:full-22.04
-P ubuntu-22.04=catthehacker/ubuntu:full-22.04
-P ubuntu-20.04=catthehacker/ubuntu:full-20.04

# Force x86_64 architecture (important for ARM hosts)
--container-architecture linux/amd64

# Artifact collection path (dsr reads artifacts from here)
--artifact-server-path /tmp/dsr-act-artifacts

# Bind host Docker socket for Docker-in-Docker workflows
--bind

# CRITICAL: Run container as host user to prevent UID mismatch!
# catthehacker images run as UID 1001 (runner). Without this line,
# any files written by act will be owned by UID 1001, not your user.
# Replace 1000:1000 with your actual UID:GID (run `id` to check)
--container-options --user=1000:1000

# Don't auto-remove containers (helps debugging)
# --rm=false

# Environment variables to inject
# --env CI=true
# --env GITHUB_ACTIONS=true
